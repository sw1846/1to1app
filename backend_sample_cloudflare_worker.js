export default {async fetch(request, env){if(request.method!=='POST') return new Response('POST only',{status:405});const body=await request.json();const {code,redirect_uri,client_id,client_secret}=body;if(!code||!redirect_uri||!client_id||!client_secret){return new Response(JSON.stringify({error:'missing_params'}),{status:400,headers:{'content-type':'application/json'}});}const params=new URLSearchParams();params.set('code',code);params.set('client_id',client_id);params.set('client_secret',client_secret);params.set('redirect_uri',redirect_uri);params.set('grant_type','authorization_code');const r=await fetch('https://oauth2.googleapis.com/token',{method:'POST',headers:{'content-type':'application/x-www-form-urlencoded'},body:params});const json=await r.json();return new Response(JSON.stringify(json),{status:r.status,headers:{'content-type':'application/json','access-control-allow-origin':'*'}});}};