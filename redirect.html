<!doctype html>
<html lang="ja"><head><meta charset="utf-8"><title>Google 認証リダイレクト</title>
<meta name="viewport" content="width=device-width,initial-scale=1">
<style>body{font-family:system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,sans-serif;max-width:800px;margin:40px auto;padding:0 16px}pre{background:#f6f8fa;padding:12px;border:1px solid #ddd;border-radius:8px;white-space:pre-wrap;word-break:break-all}.ok{color:#0969da}</style>
</head><body>
<h1>Google 認証リダイレクト</h1>
<p>このページは <strong>ポップアップを使わない</strong> 認証のための戻り先です。</p>
<div id="result"></div><pre id="json"></pre>
<p>取得した <code>code</code> は「バックエンド」でトークンに交換する必要があります（ブラウザ単体では不可）。</p>
<ul><li>クライアントIDの種類：<b>Webアプリ</b></li>
<li>このURLを <b>Authorized redirect URIs</b> に追加してください：<br><code id="redir"></code></li></ul>
<script>(function(){const p=new URLSearchParams(location.search);const data={code:p.get('code'),scope:p.get('scope'),state:p.get('state'),error:p.get('error'),error_description:p.get('error_description'),};document.getElementById('json').textContent=JSON.stringify(data,null,2);document.getElementById('redir').textContent=location.origin+location.pathname;const ok=(data.code&&!data.error);document.getElementById('result').innerHTML=ok?'<p class="ok">認証コードを受け取りました。サーバでトークンに交換してください。</p>':'<p>エラーまたはキャンセルです。</p>';console.log('[redirect]',data);})();</script>
</body></html>